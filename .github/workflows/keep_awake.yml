name: Keep Streamlit App Awake

on:
  schedule:
    # Ping every 10 minutes to keep app awake
    - cron: "*/10 * * * *"
  workflow_dispatch: # allow manual trigger

jobs:
  ping:
    runs-on: ubuntu-latest

    steps:
      - name: Ping Streamlit app
        run: |
          APP_URL="https://juzbbebwgzqpvz3jrugz9m.streamlit.app/"

          echo "Pinging app at $(date -u +%Y-%m-%dT%H:%M:%S)"

          response=$(curl -s -o /dev/null -w "%{http_code}" --max-time 30 "$APP_URL")

          if [ "$response" -eq 200 ]; then
            echo "✓ App is awake (HTTP $response)"
          else
            echo "⚠ App responded with HTTP $response"
          fi
